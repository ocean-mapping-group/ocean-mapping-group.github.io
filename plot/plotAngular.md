---
layout: default
title: plotAngular
parent: Plot Tools
nav_order: 134
---
# plotAngular

## Description
`plotAngular` is a specialized plotting utility designed to visualize angular response data, primarily from files generated by `DelayEditor` or other tools that output similar ASCII data. It plots backscatter strength (or other quantities) versus angle, typically displaying mean values and standard deviations.

The tool supports various input file formats, allows for plotting multiple datasets on the same graph, and offers customizable plot ranges and titles.

## Usage
```bash
plotAngular <infile(s)> [-outfile <filename.meta>] [-size <dx> <dy>] [-yrange <min> <max>] [OPTIONS]
```

## Arguments

| Option | Description |
|---|---|
| `<infile(s)>` | **Required.** One or more paths to input ASCII files containing angular response data. |
| `-outfile <filename.meta>` | Specifies the output PostScript metafile name. | `plot.meta` |
| `-size <dx> <dy>` | Specifies the total plot size in centimeters (X and Y dimensions). | `15.0 22.0` |
| `-yrange <min> <max>` | Sets the Y-axis range (backscatter strength in dB). | `-45.0` to `-15.0` |

### File Format Selection (Choose one)
| Option | Description |
|---|---|
| `-jackTool` | Interprets the input file as being from `jackTool`. |
| `-swathed` | Interprets the input file as being from `swathed`. |
| `-delayed` | (Default) Interprets the input file as being from `DelayEditor`. |

### Plot Customization
| Option | Description |
|---|---|
| `-together` | Plots all input files on a single graph, overlapping. |
| `-sparse` | (Not fully implemented) Intended for sparse plotting. |
| `-tit1 <string>` / `-tit2 <string>` | Sets titles for the plot. |
| `-v` | Enable verbose output. |

## Input File Formats
*   **`DELAYED` (default):**
    *   For each angle bin (1 to 180): `angle average std` (double, double, double).
    *   If `type == 9`: `tot_used sd_ratio` (int, double).
*   **`JACKTOOL`:** Not explicitly implemented in the provided code snippet beyond setting `file_format`.
*   **`SWATHED`:** Not explicitly implemented in the provided code snippet beyond setting `file_format`.

## How It Works
1.  **Initialization:** Parses command-line arguments to set plotting options, file formats, and ranges. Initializes a `plotlib` PostScript output (`plot.meta`).
2.  **Plot Area Setup:** Sets up the overall plot dimensions (`xlength`, `ylength`, `xoff`, `yoff`). Draws the main plot border.
3.  **Title and Labels:** If titles are provided, they are added to the plot.
4.  **File Reading Loop:** Loops through each input file specified:
    *   Opens the input ASCII file.
    *   **Data Loading:** Reads `angle`, `average`, and `std` values for 180 angle bins. If `type == 9`, also reads `tot_used` and `sd_ratio`.
    *   **Y-axis Range Adjustment:** Adjusts `ymin` and `ymax` if `together_flag` is not set (to stack plots vertically).
    *   **Axes and Labels:** Draws X and Y axes with labels for "Backscatter Strength (dB)" and "Grazing Angle (degrees)".
    *   **Plotting Data:** Iterates through `j` from `0` to `179` (representing angles):
        *   Plots `average[j]` (mean backscatter) as a line.
        *   If `type != 10` and `type != 9`, it also plots `av_plus[j]` and `av_minus[j]` (mean +/- standard deviation) as lines, representing the spread of the data.
5.  **Cleanup:** Calls `plot_close` to finalize the PostScript output and closes input files.

## Output
*   A PostScript metafile (`plot.meta` or specified by `-outfile`) containing time-series plots of the selected parameters.
```
```
```
---
layout: default
title: plotAngular
parent: Plot Tools
nav_order: 134
---
# plotAngular

## Description
`plotAngular` is a specialized plotting utility designed to visualize angular response data from multibeam sonars. It reads ASCII data files, typically generated by tools like `DelayEditor` or other tools that output similar ASCII data. It plots backscatter strength (or other quantities) versus angle, typically displaying mean values and standard deviations.

The tool supports various input file formats, allows for plotting multiple datasets on the same graph, and offers customizable plot ranges and titles.

## Usage
```bash
plotAngular <infile(s)> [-outfile <filename.meta>] [-size <dx> <dy>] [-yrange <min> <max>] [OPTIONS]
```

## Arguments

| Option | Description |
|---|---|
| `<infile(s)>` | **Required.** One or more paths to input ASCII files containing angular response data. |
| `-outfile <filename.meta>` | Specifies the output PostScript metafile name. | `plot.meta` |
| `-size <dx> <dy>` | Specifies the total plot size in centimeters (X and Y dimensions). | `15.0 22.0` |
| `-yrange <min> <max>` | Sets the Y-axis range (backscatter strength in dB). | `-45.0` to `-15.0` |

### File Format Selection (Choose one)
| Option | Description |
|---|---|
| `-jackTool` | Interprets the input file as being from `jackTool`. |
| `-swathed` | Interprets the input file as being from `swathed`. |
| `-delayed` | (Default) Interprets the input file as being from `DelayEditor`. |

### Plot Customization
| Option | Description |
|---|---|
| `-together` | Plots all input files on a single graph, overlapping. |
| `-sparse` | (Not fully implemented) Intended for sparse plotting. |
| `-tit1 <string>` / `-tit2 <string>` | Sets titles for the plot. |
| `-v` | Enable verbose output (not explicitly used in provided code). |

## Input File Formats
*   **`DELAYED` (default):**
    *   For each angle bin (1 to 180): `angle average std` (double, double, double).
    *   If `type == 9`: `tot_used sd_ratio` (int, double).
*   **`JACKTOOL`:** Not explicitly implemented in the provided code snippet beyond setting `file_format`.
*   **`SWATHED`:** Not explicitly implemented in the provided code snippet beyond setting `file_format`.

## How It Works
1.  **Initialization:** Parses command-line arguments to set plotting options, file formats, and ranges. Initializes a `plotlib` PostScript output (`plot.meta`).
2.  **Plot Area Setup:** Sets up the overall plot dimensions (`xlength`, `ylength`, `xoff`, `yoff`). Draws the main plot border.
3.  **Title and Labels:** If titles are provided, they are added to the plot.
4.  **File Reading Loop:** Loops through each input file specified:
    *   Opens the input ASCII file.
    *   **Data Loading:** Based on `file_format`:
        *   If `JACKTOOL`: Reads 8 header lines and then `NOVALS` (100) data points, each with `angle`, `both`, and `rough`. Converts `angle` to relative to vertical (-90 to 90).
        *   If `SWATHED`: Reads several header lines, then `90` data points for positive angles (`angle`, `both`), and then mirrors them for negative angles.
    *   Closes the input file.
3.  **Plot Generation (using `plotlib` library):**
    *   Draws the main plot border.
    *   If `file_format == JACKTOOL` and not `sparse_flag`, it prints header information to the plot.
    *   **Axis and Labels:** Draws X and Y axes with labels for "Backscatter Strength (dB)" and "Grazing Angle (degrees)".
    *   **Data Plotting:**
        *   Iterates through the `NOVALS` data points.
        *   If `together_flag` is not set, it plots all data from the current file. If `together_flag` is set, it only plots positive angles.
        *   Plots `xval` (angle) vs. `yval` (backscatter strength), drawing lines between valid data points.
        *   For `SWATHED` format, it plots points as diamonds.
        *   For `JACKTOOL` format, it also plots `rough` data if applicable.
4.  **Cleanup:** Calls `plot_close` to finalize the PostScript output and closes input files.

## Output
*   A PostScript metafile (`plot.meta` or specified by `-outfile`) containing time-series plots of the selected parameters.
```
```