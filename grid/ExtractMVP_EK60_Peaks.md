# ExtractMVP_EK60_Peaks

## Description
`ExtractMVP_EK60_Peaks` is a specialized post-processing utility designed to analyze the ASCII output files from `cutMVPLocationSections`. It automates the process of "picking" the depths of significant features from co-located vertical profiles of Sound Velocity (from MVP data) and acoustic backscatter (from an EK60 echosounder). For each input file, it identifies a single depth for a specified feature in the sound velocity profile and a single depth for a peak in a chosen backscatter trace, then outputs these two depths.

This tool is part of a workflow for tracking specific oceanographic layers (e.g., thermoclines, scattering layers) across a survey area.

## Usage
```bash
ExtractMVP_EK60_Peaks -outfile <output.ascii> -alltxtfiles <file1.txt> ... [OPTIONS]
```

## Arguments

| Option | Description | Default / Example |
|---|---|---|
| `-outfile <output.ascii>` | **Required.** The path for the output ASCII file. Each line will contain an input filename, the picked sound velocity depth, and the picked EK60 depth. | `-outfile picked_depths.txt` |
| `-alltxtfiles <file1.txt> ...` | **Required.** Specifies one or more input ASCII profile files generated by `cutMVPLocationSections`. | `-alltxtfiles section1.txt section2.txt` |
| `-pickprof <index>` | **Required.** An integer (0-11) specifying which of the 12 available EK60 backscatter traces in the input file to analyze for peak detection. | `-pickprof 7` |
| `-minz <depth>` | Defines the minimum depth (in meters) of the vertical window to search within. The tool will ignore all data shallower than this depth. | `-minz 20` |
| `-maxz <depth>` | Defines the maximum depth (in meters) of the vertical window to search within. The tool will ignore all data deeper than this depth. | `-maxz 70` |

### Picking Methods and Criteria
You must specify one method for the Sound Velocity (SV) profile and one for the EK60 profile.

| Option | Description | Example |
|---|---|---|
| `-SVpick_Upper_threshold <velocity>` | **SV Picking Method.** Sets the picking criteria for the sound velocity profile. The tool searches downwards from `-minz` and picks the depth of the *first* sample that drops **below** the specified `<velocity>` value (in m/s). This is used to find the top of a velocline. | `-SVpick_Upper_threshold 1495` |
| `-EKpick_Positive_peak <confidence>` | **EK60 Picking Method.** Sets the picking criteria for the backscatter profile. The tool finds the depth of the maximum backscatter value (the peak) within the search window. This peak is only considered valid if `(peak_value - average_value) > confidence`. This ensures that only significant acoustic peaks are chosen. | `-EKpick_Positive_peak 5.0` |
| `-v` | Enable verbose output during processing. | |
